<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>Generador Player Skeleton Pack</title>
<style>
  body { font-family: sans-serif; background: #111; color: #eee; display: flex; flex-direction: column; align-items: center; justify-content: center; height: 100vh; margin: 0; }
  h1 { margin-bottom: 20px; }
  button { padding: 12px 20px; font-size: 16px; cursor: pointer; background: #444; border: none; color: #fff; border-radius: 6px; transition: 0.3s; }
  button:hover { background: #666; }
  #mensaje { margin-top: 20px; font-size: 14px; text-align:center; }
</style>
</head>
<body>
<h1>Generador Player Skeleton Pack</h1>
<button id="generate">Generar y Descargar ZIP</button>
<div id="mensaje"></div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js"></script>
<script>
document.getElementById('generate').addEventListener('click', async () => {
    const mensaje = document.getElementById('mensaje');
    mensaje.textContent = "Generando ZIP, espera...";
    const zip = new JSZip();

    // Crear carpetas
    const rp = zip.folder("player_skeleton_pack/resource_pack");
    const bp = zip.folder("player_skeleton_pack/behavior_pack");
    rp.folder("models");
    rp.folder("entities");
    rp.folder("render_controllers");
    rp.folder("animations");
    rp.folder("textures/entity");
    bp.folder("entities");

    // Función para UUID
    function uuidv4() { return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g,function(c){ const r=Math.random()*16|0,v=c=='x'?r:(r&0x3|0x8); return v.toString(16); }); }

    // ---- Resource Pack ----
    rp.file("manifest.json", JSON.stringify({
        format_version:2,
        header:{name:"Player Skeleton RP",description:"Stickman visual - Resource Pack",uuid:uuidv4(),version:[1,0,0],min_engine_version:[1,16,0]},
        modules:[{type:"resources",uuid:uuidv4(),version:[1,0,0]}]
    }, null,2));

    rp.file("models/geometry.player_skeleton.json", JSON.stringify({
        format_version:"1.12.0",
        "minecraft:geometry":[{"description":{"identifier":"geometry.player_skeleton","texture_width":64,"texture_height":64,"visible_bounds_width":2,"visible_bounds_height":3,"visible_bounds_offset":[0,1,0]},
        "bones":[
            {"name":"root","pivot":[0,0,0]},
            {"name":"body","parent":"root","pivot":[0,12,0],"cubes":[{"origin":[-1,12,-1],"size":[2,12,2],"uv":[0,0]}]},
            {"name":"head","parent":"body","pivot":[0,24,0],"cubes":[{"origin":[-2,24,-2],"size":[4,4,4],"uv":[0,0]}]},
            {"name":"rightarm","parent":"body","pivot":[-3,22,0],"cubes":[{"origin":[-4,16,-1],"size":[2,12,2],"uv":[0,0]}]},
            {"name":"leftarm","parent":"body","pivot":[3,22,0],"cubes":[{"origin":[2,16,-1],"size":[2,12,2],"uv":[0,0]}]},
            {"name":"rightleg","parent":"body","pivot":[-1,12,0],"cubes":[{"origin":[-2,0,-1],"size":[2,12,2],"uv":[0,0]}]},
            {"name":"leftleg","parent":"body","pivot":[1,12,0],"cubes":[{"origin":[0,0,-1],"size":[2,12,2],"uv":[0,0]}]}
        ]}]
    }, null,2));

    rp.file("entities/player_skeleton.entity.json", JSON.stringify({
        format_version:"1.10.0",
        "minecraft:client_entity":{
            description:{
                identifier:"player_skeleton",
                materials:[{"*":"entity_alphatest"}],
                textures:["textures/entity/skeleton_texture"],
                render_controllers:["controller.render.skeleton"]
            }
        }
    }, null,2));

    rp.file("render_controllers/controller.render.skeleton.json", JSON.stringify({
        format_version:"1.12.0",
        render_controllers:{
            "controller.render.skeleton":{
                geometry:"geometry.player_skeleton",
                materials:[{"*":"entity_alphatest"}],
                textures:["textures/entity/skeleton_texture"]
            }
        }
    }, null,2));

    rp.file("animations/animation.player.first_person.base_pose.json", JSON.stringify({
        animations: {
            "animation.player.first_person.base_pose": {
                bones: { body: { rotation:["query.target_x_rotation","query.target_y_rotation",0] } },
                loop:true
            }
        },
        format_version:"1.8.0"
    }, null,2));

    // Textura mínima (1x1 blanco)
    const pixelBase64="iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR4nGNgYAAAAAMAASsJTYQAAAAASUVORK5CYII=";
    const pixelBlob = atob(pixelBase64).split("").map(c=>c.charCodeAt(0));
    rp.file("textures/entity/skeleton_texture.png", new Uint8Array(pixelBlob));

    // ---- Behavior Pack ----
    bp.file("manifest.json", JSON.stringify({
        format_version:2,
        header:{name:"Player Skeleton BP",description:"Stickman invocable - Behavior Pack",uuid:uuidv4(),version:[1,0,0],min_engine_version:[1,16,0]},
        modules:[{type:"data",uuid:uuidv4(),version:[1,0,0]}]
    }, null,2));

    bp.file("entities/player_skeleton.json", JSON.stringify({
        format_version:"1.10.0",
        minecraft:entity:{
            description:{
                identifier:"player_skeleton",
                is_spawnable:true,
                is_summonable:true,
                is_experimental:false,
                materials:[{"*":"entity_alphatest"}],
                textures:["textures/entity/skeleton_texture"],
                geometry:"geometry.player_skeleton",
                render_controllers:["controller.render.skeleton"]
            },
            components:{}
        }
    }, null,2));

    // Generar ZIP y descargar
    const content = await zip.generateAsync({type:"blob"});
    const a = document.createElement("a");
    a.href = URL.createObjectURL(content);
    a.download = "player_skeleton_pack.zip";
    a.click();

    mensaje.textContent="✅ ZIP generado. Mueve player_skeleton_pack a /sdcard/games/com.mojang/";
});
</script>
</body>
</html>
